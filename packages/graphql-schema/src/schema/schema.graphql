type Query {
  hello(name: String!): String!
  job(key: JobKey!): Job!
  jobs: [Job!]!
  logs: [Log!]!
  me: User
}

type Mutation {
  cancelJob(key: JobKey!): Job!
  runJob(key: JobKey!): Job!
}


type Subscription {
  countdown(from: Int!): Int!
}

type User {
  id: ID!
  createdAt: Date!
  email: String!
  nameFirst: String!
  nameLast: String!
  roleKeys: [RoleKey!]!
}

type Log {
  id: ID!
  createdAt: Date!
  message: String!
  payload: JSON
  type: LogType!
}

type Job {
  id: ID!
  canceledAt: Date
  failedAt: Date
  finishedAt: Date
  key: JobKey!
  name: String!
  startedAt: Date!
}

scalar Date

scalar JSON

enum RoleKey {
  Admin
}

enum JobKey {
  InvalidateStaleTokens
}

enum LogType {
  Error
  Default
}

fragment JobFragment on Job {
  id
  key
  name
  canceledAt
  failedAt
  finishedAt
  startedAt
}

fragment LogFragment on Log {
  id
  createdAt
  message
  payload
  type
}
